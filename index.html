<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ë‹¬ ê´€ì¸¡ ì›¹í˜ì´ì§€</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background-color: #000;
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
    }
    h1 {
      margin-bottom: 10px;
    }
    #moonContainer {
      background-color: #111;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 0 20px rgba(255, 255, 255, 0.1);
      max-width: 400px;
      text-align: center;
    }
    svg {
      display: block;
      margin: 0 auto;
    }
    .info {
      margin-top: 15px;
    }
    @media (max-width: 600px) {
      #moonContainer {
        width: 90%;
      }
    }
  </style>
</head>
<body>
  <h1>ë‹¬ì˜ ìœ„ìƒ ê´€ì°°</h1>
  <div id="moonContainer">
    <svg id="moonSVG" width="200" height="200" viewBox="0 0 100 100"></svg>
    <div class="info">
      <p id="phaseText"></p>
      <p id="phaseMeaning"></p>
    </div>
  </div>

  <script>
    function getJulianDate(date) {
      const time = date.getTime();
      const tzoffset = date.getTimezoneOffset();
      return (time / 86400000) - (tzoffset / 1440) + 2440587.5;
    }

    function getMoonPhase(date) {
      const JD = getJulianDate(date);
      const days = JD - 2451545.0;
      const lunations = 29.530588861;
      let phase = ((days % lunations) / lunations) * 100;
      if (phase < 0) phase += 100;
      return phase;
    }

    function createMoonSVG(phase) {
      const cx = 50, cy = 50, r = 45;
      let svg = `<circle cx="${cx}" cy="${cy}" r="${r}" fill="#111" />`;
      let fade = phase > 50 ? (100 - phase) / 50 : phase / 50;

      if (phase < 1 || phase > 99) {
        svg += `<circle cx="${cx}" cy="${cy}" r="${r}" fill="#000" />`;
      } else if (Math.abs(phase - 50) < 1) {
        svg += `<circle cx="${cx}" cy="${cy}" r="${r}" fill="#fff" filter="url(#glow)" />`;
      } else {
        const direction = phase <= 50 ? 1 : -1;
        const arcR = r * fade;
        svg += `<path d="M ${cx} ${cy - r} A ${r} ${r} 0 1 1 ${cx} ${cy + r} A ${arcR} ${r} 0 0 ${direction === 1 ? 0 : 1} ${cx} ${cy - r}" fill="#fff" filter="url(#glow)" />`;
      }

      const defs = `
        <defs>
          <filter id="glow" x="-50%" y="-50%" width="200%" height="200%">
            <feDropShadow dx="0" dy="0" stdDeviation="2" flood-color="#fff" />
          </filter>
        </defs>
      `;

      const fullSVG = `${defs}${svg}`;
      console.log(fullSVG); // ì½˜ì†” í™•ì¸
      return fullSVG;
    }

    function getMoonPhaseInfo(phase) {
      if (phase < 1) return ["ì‚­ (New Moon) ğŸŒ‘", "ë‹¬ì´ ë³´ì´ì§€ ì•ŠëŠ” ì‹œê¸°ì…ë‹ˆë‹¤. ìƒˆë¡œìš´ ì‹œì‘ì„ ì¤€ë¹„í•˜ì„¸ìš”."];
      if (phase < 10) return ["ì´ˆìŠ¹ë‹¬ ğŸŒ’", "ì‘ì€ ë¹›ì´ ì‹œì‘ë˜ëŠ” ì‹œê¸°ì…ë‹ˆë‹¤. ìƒˆ ì¶œë°œì˜ ì˜ì§€ê°€ í•„ìš”í•©ë‹ˆë‹¤."];
      if (phase < 25) return ["ìƒí˜„ë‹¬ ğŸŒ“", "ì™¼ìª½ì´ ì–´ë‘ìš´ ë°˜ë‹¬ì…ë‹ˆë‹¤. ì—´ì •ì´ í•„ìš”í•œ ì‹œê¸°ì…ë‹ˆë‹¤."];
      if (phase < 40) return ["ë§Œì›” ì§ì „ ğŸŒ”", "ë³´ë¦„ë‹¬ì„ í–¥í•´ ê°€ëŠ” ì‹œê¸°ì…ë‹ˆë‹¤. ì„±ì¥ì´ ëŠê»´ì§‘ë‹ˆë‹¤."];
      if (phase < 60) return ["ë³´ë¦„ë‹¬ ğŸŒ•", "ë‹¬ì´ ê°€ë“ ì°¬ ì‹œê¸°ì…ë‹ˆë‹¤. ì™„ì„±ê³¼ ê°ì‚¬ì˜ ì‹œê°„ì…ë‹ˆë‹¤."];
      if (phase < 75) return ["ë§Œì›” ì´í›„ ğŸŒ–", "ë‹¬ì´ ì¤„ì–´ë“œëŠ” ì‹œê¸°ì…ë‹ˆë‹¤. ì •ë¦¬ì™€ ì„±ì°°ì˜ ì‹œê°„ì…ë‹ˆë‹¤."];
      if (phase < 90) return ["í•˜í˜„ë‹¬ ğŸŒ—", "ì˜¤ë¥¸ìª½ì´ ì–´ë‘ìš´ ë°˜ë‹¬ì…ë‹ˆë‹¤. ì§€ë‚œ ì‹œê°„ì— ëŒ€í•œ ë°˜ì„±ì´ í•„ìš”í•©ë‹ˆë‹¤."];
      return ["ê·¸ë¯ë‹¬ ğŸŒ˜", "ë‹¬ì´ ê±°ì˜ ì‚¬ë¼ì§„ ì‹œê¸°ì…ë‹ˆë‹¤. ì¡°ìš©í•œ ì¤€ë¹„ê°€ í•„ìš”í•©ë‹ˆë‹¤."];
    }

    function updateMoon() {
      const today = new Date();
      const phase = getMoonPhase(today);
      const svgContent = createMoonSVG(phase);
      document.getElementById("moonSVG").innerHTML = svgContent; // í™”ë©´ ì‚½ì…
      const [name, meaning] = getMoonPhaseInfo(phase);
      document.getElementById("phaseText").textContent = name;
      document.getElementById("phaseMeaning").textContent = meaning;
    }

    updateMoon();
  </script>
</body>
</html>
