<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ì˜¤ëŠ˜ì˜ ë‹¬</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/suncalc/1.9.0/suncalc.min.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: #000;
      color: #fff;
      font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      min-height: 100vh;
      padding: 1rem;
      text-align: center;
    }

    h1 {
      font-size: 2rem;
      margin-bottom: 1rem;
    }

    .moon {
      width: 200px;
      height: 200px;
      border-radius: 50%;
      margin: 1rem auto;
      box-shadow: 0 0 30px rgba(255, 223, 0, 0.6);
    }

    .info {
      font-size: 1rem;
      line-height: 1.6;
    }

    .highlight {
      color: #ffde59;
    }

    @media (max-width: 600px) {
      h1 {
        font-size: 1.5rem;
      }
      .moon {
        width: 150px;
        height: 150px;
      }
      .info {
        font-size: 0.9rem;
      }
    }
  </style>
  <link href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/variable/pretendardvariable-dynamic-subset.css" rel="stylesheet" />
</head>
<body>
  <h1>ğŸŒ™ ì˜¤ëŠ˜ì˜ ë‹¬</h1>
  <div class="moon" id="moon"></div>
  <div class="info" id="info"></div>

  <script>
    const moonDiv = document.getElementById('moon');
    const infoDiv = document.getElementById('info');

    navigator.geolocation.getCurrentPosition(pos => {
      const lat = pos.coords.latitude;
      const lon = pos.coords.longitude;
      const now = new Date();

      const phaseData = SunCalc.getMoonIllumination(now);
      const posData = SunCalc.getMoonPosition(now, lat, lon);
      const times = SunCalc.getMoonTimes(now, lat, lon);

      const phase = (phaseData.phase * 100).toFixed(1);
      const azimuth = (posData.azimuth * 180 / Math.PI + 360) % 360;
      const altitude = (posData.altitude * 180 / Math.PI).toFixed(1);

      moonDiv.style.background = `radial-gradient(circle at ${phaseData.phase <= 0.5 ? 'left' : 'right'}, #ffdb4d ${Math.abs(0.5 - phaseData.phase) * 200}%, #000 ${Math.abs(0.5 - phaseData.phase) * 200}%)`;

      let label = '';
      if (phase < 1) label = 'ì‚­ ğŸŒ‘';
      else if (phase < 15) label = 'ì´ˆìŠ¹ë‹¬ ğŸŒ’';
      else if (phase < 35) label = 'ìƒí˜„ë‹¬ ğŸŒ“';
      else if (phase < 45) label = 'ë§Œìƒ ğŸŒ”';
      else if (phase <= 55) label = 'ë³´ë¦„ë‹¬ ğŸŒ•';
      else if (phase < 65) label = 'ë§Œí•˜ ğŸŒ–';
      else if (phase < 85) label = 'í•˜í˜„ë‹¬ ğŸŒ—';
      else if (phase < 99) label = 'ê·¸ë¯ë‹¬ ğŸŒ˜';
      else label = 'ì‚­ ğŸŒ‘';

      const description = {
        'ì‚­ ğŸŒ‘': 'ë‹¬ì´ ë³´ì´ì§€ ì•ŠëŠ” ì‹œê¸°ì…ë‹ˆë‹¤. ìƒˆë¡œìš´ ì‹œì‘ì„ ì¤€ë¹„í•  ë•Œì…ë‹ˆë‹¤.',
        'ì´ˆìŠ¹ë‹¬ ğŸŒ’': 'ê¸°íšŒì˜ ì”¨ì•—ì´ ìë¼ë‚©ë‹ˆë‹¤.',
        'ìƒí˜„ë‹¬ ğŸŒ“': 'ê¸ì •ì ì¸ ì—ë„ˆì§€ê°€ ê°€ë“í•©ë‹ˆë‹¤.',
        'ë§Œìƒ ğŸŒ”': 'ê¸°ëŒ€ê°ì´ ì»¤ì§€ëŠ” ì‹œê¸°ì…ë‹ˆë‹¤.',
        'ë³´ë¦„ë‹¬ ğŸŒ•': 'í’ìš”ì™€ ì¶©ë§Œí•¨ì˜ ì‹œê¸°ì…ë‹ˆë‹¤.',
        'ë§Œí•˜ ğŸŒ–': 'ê°ì‚¬ì˜ ì‹œê°„ì„ ê°€ì ¸ë³´ì„¸ìš”.',
        'í•˜í˜„ë‹¬ ğŸŒ—': 'ì§€ë‚˜ì˜¨ ë‚ ë“¤ì„ ëŒì•„ë³´ì„¸ìš”.',
        'ê·¸ë¯ë‹¬ ğŸŒ˜': 'ë§ˆë¬´ë¦¬ì™€ ì •ë¦¬ì˜ ì‹œê¸°ì…ë‹ˆë‹¤.'
      };

      infoDiv.innerHTML = `
        <p><span class="highlight">ìœ„ìƒ</span>: ${phase}%</p>
        <p><span class="highlight">ë°©í–¥</span>: ${azimuth.toFixed(1)}Â°</p>
        <p><span class="highlight">ê³ ë„</span>: ${altitude}Â°</p>
        <p><span class="highlight">ì¶œ</span>: ${times.rise ? times.rise.toLocaleTimeString() : 'ì—†ìŒ'} / 
           <span class="highlight">ëª°</span>: ${times.set ? times.set.toLocaleTimeString() : 'ì—†ìŒ'}</p>
        <p>ğŸŒ“ <strong>${label}</strong> - ${description[label]}</p>
      `;
    }, err => {
      infoDiv.innerHTML = '<p>ìœ„ì¹˜ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.</p>';
    });
  </script>
</body>
</html>
