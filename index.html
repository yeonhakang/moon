<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>팔의 미량 관찰하기</title>
  <style>
    body {
      background-color: #000;
      color: #fff;
      font-family: 'Apple SD Gothic Neo', 'Segoe UI', sans-serif;
      text-align: center;
      padding: 20px;
    }
    h1 {
      font-size: 2em;
      margin-bottom: 20px;
      color: #ffd700;
    }
    #moonSVG {
      width: 220px;
      height: 220px;
      margin: 0 auto;
      display: block;
      filter: drop-shadow(0 0 12px #fcd44080);
    }
    .info {
      margin-top: 20px;
      font-size: 1.2em;
    }
    .highlight {
      color: #ffd700;
    }
  </style>
</head>
<body>
  <h1>팔의 미량</h1>
  <svg id="moonSVG" viewBox="0 0 100 100"></svg>
  <div class="info">
    <div>화이샴: <span class="highlight" id="phasePercent"></span>%</div>
    <div>설명: <span id="moonDesc"></span></div>
  </div>

  <script>
    function createMoonSVG(phase) {
      const cx = 50, cy = 50, r = 48;
      const percent = phase / 100;
      const fade = percent <= 0.5 ? percent * 2 : (1 - percent) * 2;
      const sweepFlag = percent <= 0.5 ? 0 : 1;

      const arcPath = `
        M ${cx - r} ${cy}
        A ${r} ${r} 0 1 1 ${cx + r} ${cy}
        A ${r * fade} ${r} 0 1 ${sweepFlag} ${cx - r} ${cy}
        Z
      `;

      const svgContent = `
        <defs>
          <radialGradient id="moonLight" cx="50%" cy="50%" r="50%">
            <stop offset="0%" stop-color="#fcd440"/>
            <stop offset="100%" stop-color="#fcd440"/>
          </radialGradient>
          <radialGradient id="moonDark" cx="50%" cy="50%" r="50%">
            <stop offset="0%" stop-color="#000000" stop-opacity="0.9"/>
            <stop offset="100%" stop-color="#000000" stop-opacity="1"/>
          </radialGradient>
        </defs>
        <circle cx="${cx}" cy="${cy}" r="${r}" fill="url(#moonDark)" />
        <path d="${arcPath}" fill="url(#moonLight)" />
      `;

      console.log(svgContent); // SVG 개체 확인
      return svgContent;
    }

    function getMoonPhaseInfo(phase) {
      if (phase < 1) return "산 가까지 정지.";
      if (phase < 25) return "초승달 - 기획의 씨악이 자라남니다.";
      if (phase < 50) return "상현달 - 건강과 확장의 시기.";
      if (phase < 75) return "만하 - 감정의 개포.";
      if (phase < 99) return "하현달 - 도움을 줄 고도.";
      return "극한 수리.";
    }

    const today = new Date();
    const jd = (today.getTime() / 86400000) + 2440587.5;
    const days = jd - 2451545.0;
    const lunations = 29.530588861;
    let phase = ((days % lunations) / lunations) * 100;
    if (phase < 0) phase += 100;

    document.getElementById("moonSVG").innerHTML = createMoonSVG(phase);
    document.getElementById("phasePercent").textContent = phase.toFixed(1);
    document.getElementById("moonDesc").textContent = getMoonPhaseInfo(phase);
  </script>
</body>
</html>
