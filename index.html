<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Îã¨Ïùò Î™®Ïñë Í¥ÄÏ∞∞ÌïòÍ∏∞</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #000;
            color: #fff;
            line-height: 1.6;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: #121212;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 2px 4px rgba(255,255,255,0.1);
        }

        .header {
            text-align: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #333;
        }

        .header h1 {
            color: #ffffff;
            font-size: 24px;
        }

        .controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            gap: 10px;
            flex-wrap: wrap;
        }

        .date-input {
            padding: 10px;
            border: 1px solid #444;
            background: #222;
            color: #fff;
            border-radius: 8px;
            flex: 1;
            min-width: 200px;
            font-size: 16px;
        }

        .button {
            padding: 10px 20px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            white-space: nowrap;
            font-size: 16px;
            transition: background-color 0.2s;
        }

        .button:hover {
            background: #0056b3;
        }

        .moon-display {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 20px 0;
            padding: 20px;
            background: #1a1a1a;
            border-radius: 12px;
        }

        .moon-svg {
            width: 200px;
            height: 200px;
            background: #000;
            border-radius: 50%;
            padding: 0;
            margin-bottom: 15px;
            box-shadow: 0 0 25px #fdf5e6;
        }

        .moon-svg-small {
            width: 50px;
            height: 50px;
            background: #000;
            border-radius: 50%;
            padding: 0;
            margin: 10px auto;
            box-shadow: 0 0 10px #fdf5e6;
        }

        .info {
            text-align: center;
            margin-top: 15px;
        }

        .moon-meaning {
            margin-top: 15px;
            padding: 15px;
            background: #263238;
            border-radius: 8px;
            color: #90caf9;
            font-size: 0.95em;
        }

        .month-view {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .day-card {
            padding: 15px;
            background: #1c1c1c;
            border-radius: 8px;
            text-align: center;
            display: flex;
            flex-direction: column;
            gap: 10px;
            box-shadow: 0 1px 3px rgba(255,255,255,0.1);
            transition: transform 0.2s;
        }

        .current-date {
            background: #2e3c4d;
        }

        @media (max-width: 600px) {
            .controls {
                flex-direction: column;
            }
            .date-input {
                width: 100%;
            }
            .moon-svg {
                width: 150px;
                height: 150px;
            }
            .observation-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Îã¨Ïùò Î™®Ïñë Í¥ÄÏ∞∞ÌïòÍ∏∞</h1>
        </div>
        <div class="controls">
            <input type="date" id="dateSelector" class="date-input">
            <button id="viewToggle" class="button">ÏõîÍ∞Ñ Î≥¥Í∏∞</button>
        </div>
        <div id="dailyView" class="moon-display">
            <svg id="moonSVG" class="moon-svg" viewBox="0 0 100 100"></svg>
            <div class="info">
                <h2 id="phaseText"></h2>
                <p id="dateText"></p>
                <div id="moonMeaning" class="moon-meaning"></div>
            </div>
        </div>
    </div>
<script>
    function getJulianDate(date) {
        const time = date.getTime();
        const tzoffset = date.getTimezoneOffset();
        return (time / 86400000) - (tzoffset / 1440) + 2440587.5;
    }

    function getMoonPhase(date) {
        const JD = getJulianDate(date);
        const days = JD - 2451545.0;
        const lunations = 29.530588861;
        let phase = ((days % lunations) / lunations) * 100;
        if (phase < 0) phase += 100;
        return phase;
    }

    function createMoonSVG(phase) {
        const cx = 50, cy = 50, r = 48;
        let d = '';
        const fade = phase > 50 ? (100 - phase) / 50 : phase / 50;

        if (phase <= 50) {
            d = `M ${cx} ${cy-r} A ${r} ${r} 0 1 1 ${cx} ${cy+r} A ${r*fade} ${r} 0 0 0 ${cx} ${cy-r}`;
        } else {
            d = `M ${cx} ${cy-r} A ${r} ${r} 0 1 0 ${cx} ${cy+r} A ${r*fade} ${r} 0 0 1 ${cx} ${cy-r}`;
        }

        return `<circle cx="${cx}" cy="${cy}" r="${r}" fill="#000" stroke="#FDB813" stroke-width="2" />
                <path d="${d}" fill="#FDB813" />`;
    }

    function getMoonPhaseInfo(phase) {
        if (phase < 1 || phase > 99) return { name: "ÏÇ≠ üåë", meaning: "Îã¨Ïù¥ Î≥¥Ïù¥ÏßÄ ÏïäÎäî ÏãúÍ∏∞ÏûÖÎãàÎã§." };
        if (phase < 25) return { name: "Ï¥àÏäπÎã¨ üåí", meaning: "Ïò§Î•∏Ï™ΩÏù¥ Ï†êÏ†ê Î∞ùÏïÑÏßëÎãàÎã§." };
        if (phase < 50) return { name: "ÏÉÅÌòÑÎã¨ üåì", meaning: "Îã¨Ïùò Ïò§Î•∏Ï™ΩÏù¥ Î∞òÏØ§ Î∞ùÏäµÎãàÎã§." };
        if (phase < 75) return { name: "ÌïòÌòÑÎã¨ üåó", meaning: "ÏôºÏ™ΩÏù¥ Î∞òÏØ§ Î∞ùÏäµÎãàÎã§." };
        return { name: "Í∑∏ÎØêÎã¨ üåò", meaning: "ÏôºÏ™ΩÏù¥ Ìù¨ÎØ∏ÌïòÍ≤å ÎπõÎÇ©ÎãàÎã§." };
    }

    function updateUI(date) {
        const phase = getMoonPhase(date);
        const info = getMoonPhaseInfo(phase);

        document.getElementById('moonSVG').innerHTML = createMoonSVG(phase);
        document.getElementById('phaseText').textContent = info.name;
        document.getElementById('dateText').textContent = date.toLocaleDateString('ko-KR');
        document.getElementById('moonMeaning').textContent = info.meaning;
    }

    const dateSelector = document.getElementById('dateSelector');
    dateSelector.valueAsDate = new Date();
    updateUI(new Date());

    dateSelector.addEventListener('change', (e) => {
        updateUI(new Date(e.target.value));
    });
</script>
</body>
</html>
